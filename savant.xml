<?xml version="1.0" ?>
<!--
  ~ Copyright (c) 2009, Inversoft, All Rights Reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
  ~ either express or implied. See the License for the specific
  ~ language governing permissions and limitations under the License.
  -->
<project>
  <macrodef name="jar-post">
    <sequential>
      <delete dir="target/dist"/>
      <copy todir="target/dist/bin">
        <fileset dir="src/scripts/main" includes="*"/>
      </copy>
      <chmod perm="+x" file="target/dist/bin/sb"/>
      <copy todir="target/dist/lib">
        <fileset dir="target/jars" includes="*"/>
      </copy>
      <artifactcopy todir="target/dist/lib" flatten="true" types="compile,run"/>
      <tar tarfile="target/savant-${project.version}.tar.gz" compression="gzip">
        <tarfileset prefix="savant-${project.version}" dir="target/dist" includes="**/*" excludes="bin/svnt"/>
        <tarfileset mode="755" prefix="savant-${project.version}" dir="target/dist" includes="bin/svnt"/>
      </tar>
      <zip zipfile="target/savant-${project.version}.zip">
        <zipfileset prefix="savant-${project.version}" dir="target/dist" includes="**/*" excludes="bin/svnt"/>
        <zipfileset filemode="755" prefix="savant-${project.version}" dir="target/dist" includes="bin/svnt"/>
      </zip>
    </sequential>
  </macrodef>
</project>
